# Luc.Util

A high-performance .NET library for working with UUIDs. Provides fast, zero-allocation helpers for UUIDv4 (random) and UUIDv7 (time-ordered) formats â€” plus compact string encodings and conversion helpers.

## Features

- **UUID**: Core UUID struct with multiple encoding formats (hex, base36, base25)
- **UUIDv4**: Random UUID generation (RFC 4122)
- **UUIDv7**: Time-ordered UUID generation (RFC 9562)
- **Zero-allocation**: Stack-allocated operations for optimal performance
- **Multiple encodings**: Standard hex, base36 (25 chars), and base25 (28 chars)
- **Interop**: Extension methods for `System.Guid` conversion

## Usage

### Creating UUIDs

```csharp
using Luc.Util;

// Create a random UUIDv4
var uuid4 = UUID.NewV4();

// Create a time-ordered UUIDv7
var uuid7 = UUID.NewV7();

// Create UUIDv7 with custom timestamp and randomness
// Create UUIDv7 with a custom timestamp, random bytes, and sequence
// unixEpochMs is milliseconds since unix epoch
// randomBytes must be at least 8 bytes, seqBytes must be at least 2 bytes
var customUuid7 = UUID.NewV7(
    unixEpochMs: DateTimeOffset.UtcNow.ToUnixTimeMilliseconds(),
    randomBytes: myRandomBytes,
    seqBytes: mySequenceBytes
);
```

### Working with UUIDs

```csharp
// Get the timestamp from UUIDv7
DateTimeOffset timestamp = uuid7.V7GetTimestamp();

// Convert to different formats
string hex = uuid7.ToString();           // Standard hyphenated format (36 chars incl hyphens)
string base36 = uuid7.ToBase36();        // 25-character base36 (0-9a-z)
string base25 = uuid7.ToBase25();        // 28-character base25 (alphabet excludes ambiguous chars)

// Access raw bytes
ReadOnlySpan<byte> bytes = uuid7.Bytes;

// Convert from System.Guid to Luc.Util.UUID
Guid systemGuid = Guid.NewGuid();
UUID baseUuid = systemGuid.AsUUID();
```

### Converting from System.Guid

```csharp
Guid systemGuid = Guid.NewGuid();

// Try to convert to UUIDv4
// Use `AsUUID` to convert from `System.Guid` to `Luc.Util.UUID` and then
// call `GetVersion()` or `GetVariant()` to inspect the value
UUID converted = systemGuid.AsUUID();
Console.WriteLine(converted.GetVersion());
```

### Parsing from Strings

```csharp
// Parse from base36
// Parse from base36 (25 char)
var uuidFrom36 = UUID.FromBase36("00000000000000000000abcde");

// Parse from base25
// Parse from base25 (28 char)
var uuidFrom25 = UUID.FromBase25("2222222222222222222222222222");
```

## Performance

All UUID operations are designed for zero-allocation performance:

## License

This project is licensed under the terms of the MIT License. See [../LICENSE.md](../LICENSE.md) for details.

---

## Tests and Test Data

- Unit tests are in `Luc.Util.Tests`. Run them with `dotnet test` at the solution root.
- UUIDv7 sample data is generated by `Luc.Util.Tests.SampleGenerator` and stored in `Luc.Util.Tests/Generated/Uuid7TestSamples.cs`.

To regenerate test samples run from the solution root:

```bash
dotnet run --project Luc.Util.Tests.SampleGenerator/Luc.Util.Tests.SampleGenerator.csproj
```

Run unit tests:

```bash
dotnet test
```

---

## Notes

- `ToBase36()` returns a 25-character string; `FromBase36()` requires exactly 25 characters.
- `ToBase25()` returns a 28-character string; `FromBase25()` requires exactly 28 characters.
- `V7GetTimestamp()` extracts the 48-bit timestamp from UUIDv7 and returns a `DateTimeOffset`.
- For secure randomness, supply your own RNG when generating values in production.
